<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/ScrollMagic.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/animation.gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/ScrollTrigger.min.js"></script>
<style>
    .cont_grid .content {position: relative;min-height: 100dvh;align-content: center; display: grid;height: 100vh;place-items: center;grid-template-areas: 'main';grid-template-rows: 100%;grid-template-columns: 100%;}
    .cont_grid .grid {grid-area: main;display: grid;width: 100%;height: 100%;grid-template-columns: repeat(8,1fr);grid-template-rows: 1fr 1fr 1fr; grid-template-columns: repeat(9,1fr);grid-auto-rows: 1fr;}
    .cont_grid .grid__img {background-size: cover;background-position: 50% 50%;pointer-events: none;will-change: transform;transform: translateZ(0.1px); width: auto;}

    main .content {overflow: hidden;}
</style>
<div class="content">
    <div class="content_tit">
        <h2>gsap Animation</h2>
    </div>
    <ul class="content_nav inner cn-nav cn-auto-index">
        <li class="active">Examples</li>
    </ul>
    <ul class="content_tab">
        <li>
            <div class="content_wrap">
                <div>
                    <div class="code_wrap">
                        <ul class="code_tab">
                            <li>
                                <div class="cont_grid">
                                    <section class="content">
                                        <div class="grid grid--spaced grid--small">
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/28.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/29.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/30.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/1.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/2.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/3.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/4.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/5.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/6.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/7.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/8.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/9.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/10.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/11.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/12.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/13.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/14.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/15.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/16.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/17.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/18.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/19.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/20.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/21.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/22.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/23.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/24.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/25.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/26.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/27.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/28.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/29.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/30.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/31.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/32.webp)"></div>
                                            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/33.webp)"></div>
                                        </div>
                                    </section>
                                </div>
                            </li>
                            <li>
                                <div class="code html">
<pre><code class="language-html" style="display: none;">
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/ScrollMagic.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/animation.gsap.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/ScrollTrigger.min.js"&gt;&lt;/script&gt;

<style>
    .cont_grid .content {position: relative;min-height: 100dvh;align-content: center; display: grid;height: 100vh;place-items: center;grid-template-areas: 'main';grid-template-rows: 100%;grid-template-columns: 100%;}
    .cont_grid .grid {grid-area: main;display: grid;width: 100%;height: 100%;grid-template-columns: repeat(8,1fr);grid-template-rows: 1fr 1fr 1fr; grid-template-columns: repeat(9,1fr);grid-auto-rows: 1fr;}
    .cont_grid .grid__img {background-size: cover;background-position: 50% 50%;pointer-events: none;will-change: transform;transform: translateZ(0.1px);}
</style>

<div class="cont_grid">
    <section class="content">
        <div class="grid grid--spaced grid--small">
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/28.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/29.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/30.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/1.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/2.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/3.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/4.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/5.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/6.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/7.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/8.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/9.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/10.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/11.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/12.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/13.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/14.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/15.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/16.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/17.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/18.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/19.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/20.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/21.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/22.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/23.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/24.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/25.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/26.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/27.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/28.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/29.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/30.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/31.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/32.webp)"></div>
            <div class="grid__img" style="background-image:url(https://tympanus.net/Development/OnScrollLayoutFormations/img/33.webp)"></div>
        </div>
    </section>
</div>

&lt;script type="text/javascript"&gt;
    $(function(){
        const calculateInitialTransform = (element, offsetDistance = 250, maxRotation = 300, maxZTranslation = 2000) => {
        const viewportCenter = { width: window.innerWidth / 2, height: window.innerHeight / 2 };
        const elementCenter = { 
            x: element.offsetLeft + element.offsetWidth / 2, 
            y: element.offsetTop + element.offsetHeight / 2 
        };
        const angle = Math.atan2(Math.abs(viewportCenter.height - elementCenter.y), Math.abs(viewportCenter.width - elementCenter.x));
        const translateX = Math.abs(Math.cos(angle) * offsetDistance);
        const translateY = Math.abs(Math.sin(angle) * offsetDistance);
        const maxDistance = Math.sqrt(Math.pow(viewportCenter.width, 2) + Math.pow(viewportCenter.height, 2));
        const currentDistance = Math.sqrt(Math.pow(viewportCenter.width - elementCenter.x, 2) + Math.pow(viewportCenter.height - elementCenter.y, 2));
        const distanceFactor = currentDistance / maxDistance;
        const rotationX = ((elementCenter.y < viewportCenter.height ? -1 : 1) * (translateY / offsetDistance) * maxRotation * distanceFactor);
        const rotationY = ((elementCenter.x < viewportCenter.width ? 1 : -1) * (translateX / offsetDistance) * maxRotation * distanceFactor);
        const translateZ = maxZTranslation * distanceFactor;
        return {
            x: elementCenter.x < viewportCenter.width ? -translateX : translateX,
            y: elementCenter.y < viewportCenter.height ? -translateY : translateY,
            z: translateZ,
            rotateX: rotationX,
            rotateY: rotationY
        };
    };

    var controller = new ScrollMagic.Controller();

    var fourthGridTimeline = gsap.timeline({
        defaults: { ease: 'expo' }
    })
    // 3D 효과를 위해 perspective 설정
    .set(('.grid'), { perspective: 1000 })
    .fromTo($('.grid .grid__img'), 
        {
            // 시작 상태: 각 이미지의 초기 변환 값 적용 (x, y, z, 회전 등)
            x: function(index, el) { return calculateInitialTransform(el).x; },
            y: function(index, el) { return calculateInitialTransform(el).y; },
            z: function(index, el) { return calculateInitialTransform(el).z; },
            rotateX: function(index, el) { return calculateInitialTransform(el).rotateX * 0.5; },
            rotateY: function(index, el) { return calculateInitialTransform(el).rotateY; },
            autoAlpha: 0,
            scale: 0.7,
        }, 
        {
            x: 0,
            y: 0,
            z: 0,
            rotateX: 0,
            rotateY: 0,
            autoAlpha: 1,
            scale: 1,
            stagger: {
                amount: 0.2,
                from: 'center',
                grid: [4, 9]
            }
        }
    );

    var scene = new ScrollMagic.Scene({
        triggerElement: $('.cont_grid')[0],
        triggerHook: 0,
        duration: "200%"
    })
        .setPin($('.cont_grid')[0])
        .setTween(fourthGridTimeline)
        .addTo(controller);
    });
&lt;/script&gt;
</div></code></pre>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
        </li>
    </ul>
</div>
<script type="text/javascript">
    $(function(){
	    const calculateInitialTransform = (element, offsetDistance = 250, maxRotation = 300, maxZTranslation = 2000) => {
		const viewportCenter = { width: window.innerWidth / 2, height: window.innerHeight / 2 };
		const elementCenter = { 
			x: element.offsetLeft + element.offsetWidth / 2, 
			y: element.offsetTop + element.offsetHeight / 2 
		};
		const angle = Math.atan2(Math.abs(viewportCenter.height - elementCenter.y), Math.abs(viewportCenter.width - elementCenter.x));
		const translateX = Math.abs(Math.cos(angle) * offsetDistance);
		const translateY = Math.abs(Math.sin(angle) * offsetDistance);
		const maxDistance = Math.sqrt(Math.pow(viewportCenter.width, 2) + Math.pow(viewportCenter.height, 2));
		const currentDistance = Math.sqrt(Math.pow(viewportCenter.width - elementCenter.x, 2) + Math.pow(viewportCenter.height - elementCenter.y, 2));
		const distanceFactor = currentDistance / maxDistance;
		const rotationX = ((elementCenter.y < viewportCenter.height ? -1 : 1) * (translateY / offsetDistance) * maxRotation * distanceFactor);
		const rotationY = ((elementCenter.x < viewportCenter.width ? 1 : -1) * (translateX / offsetDistance) * maxRotation * distanceFactor);
		const translateZ = maxZTranslation * distanceFactor;
		return {
			x: elementCenter.x < viewportCenter.width ? -translateX : translateX,
			y: elementCenter.y < viewportCenter.height ? -translateY : translateY,
			z: translateZ,
			rotateX: rotationX,
			rotateY: rotationY
		};
	};
  
    var controller = new ScrollMagic.Controller();
  
    var fourthGridTimeline = gsap.timeline({
		defaults: { ease: 'expo' }
    })
    // 3D 효과를 위해 perspective 설정
    .set(('.grid'), { perspective: 1000 })
    .fromTo($('.grid .grid__img'), 
		{
            // 시작 상태: 각 이미지의 초기 변환 값 적용 (x, y, z, 회전 등)
            x: function(index, el) { return calculateInitialTransform(el).x; },
            y: function(index, el) { return calculateInitialTransform(el).y; },
            z: function(index, el) { return calculateInitialTransform(el).z; },
            rotateX: function(index, el) { return calculateInitialTransform(el).rotateX * 0.5; },
            rotateY: function(index, el) { return calculateInitialTransform(el).rotateY; },
            autoAlpha: 0,
            scale: 0.7,
		}, 
		{
            x: 0,
            y: 0,
            z: 0,
            rotateX: 0,
            rotateY: 0,
            autoAlpha: 1,
            scale: 1,
            stagger: {
                amount: 0.2,
                from: 'center',
                grid: [4, 9]
            }
		}
    );
  
    var scene = new ScrollMagic.Scene({
        triggerElement: $('.cont_grid')[0],
        triggerHook: 0,
        duration: "200%"
    })
        .setPin($('.cont_grid')[0])
        .setTween(fourthGridTimeline)
        .addTo(controller);
	});
</script>
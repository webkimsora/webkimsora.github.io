<!DOCTYPE HTML>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<title>메큐라이크 - Papago 번역</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<!-- <meta name="viewport" content="user-scalable=yes, initial-scale=1.0, maximum-scale=2.0, minimum-scale=1.0, width=device-width"> -->
	<link rel="stylesheet" type="text/css" href="./css/common.css?v=01"  media="all" />
	<script type="text/javascript" src="./js/jquery-1.11.3.min.js" ></script>
	<script type="text/javascript" src="./js/common.js" ></script>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	
</head>
<body>
	
	
	<div class="papagoWrap">
		
		<div class="h1Wrap"><h1>Papago</h1></div>
		<style>
		.contentTrans .chatCont {height:1px; width:1px; position: absolute; visibility:hidden;}
		.contentTrans .contentArea {margin-bottom:100px;}
		.contentTrans .contentArea ul {display:flex;}
		.contentTrans .contentArea ul li{ border:1px solid #999; border-radius:5px; padding:10px 10px 50px 10px; margin:0 1%; width: 25%; position: relative; font-size: 15px;}
		.contentTrans .contentArea ul li .contBox{white-space:pre-line;}
		.contentTrans .contentArea ul li .btnTrans{position: absolute; right:5px; bottom:5px;  padding:5px;border:1px solid #333;background:#21dc6d; color:#fff; font-weight: bold; border-radius:5px; cursor:pointer;}
		
		.newsArea {position: relative;}
		.newsArea .title{font-size: 20px; margin-bottom: 20px; font-weight: bold; padding-right: 206px;}
		.newsArea .contBox{font-size:15px; margin-bottom: 20px; white-space:pre-line; }
		.newsArea .btnTrans{position: absolute; right:5px; top:-10px;  padding:10px 20px; border:1px solid #333;background:#21dc6d; color:#fff; font-weight: bold; border-radius:5px; font-size: 20px;  cursor:pointer;}
		
		.loading {display: none; position:fixed; left:0; top:0; width: 100%; height: 100%; z-index: 999; text-align: center; background:rgba(0,0,0,.5);}
		.loading i {position: absolute; left:50%; top:50%; margin:-100px 0 0 -100px; color:#21dc6d; font-weight:bold; font-size:100px;}
		.allChange {position:fixed; right:10px; top:10px; padding:10px 20px; border:1px solid #333;background:#0088ff; color:#fff; font-weight: bold; border-radius:5px; font-size: 20px; }
		</style>	
		
		<div class="h2Wrap"><i class="fas fa-book"></i><h2 class="ex">가사번역</h2></div>
		
		<div class="contentTrans">
			
			<div class="contentArea">
				<ul>
					<li>
						<div class="contBox ex">
							이별을 말하고 넌 괜찮은 거니 여전히 내 하루는 온통 네 생각에 뜬 눈으로 밤을 지새고 난 두려워 시간이 쌓여갈수록 내가 잊혀질까 봐 우리 시간마저 모두 무너질까 봐 나도 모르게 너무 보고 싶어서 네 집 앞을 찾아가 
						</div>
						<div class="btnTrans ex">가사번역</div>						
					</li>
					<li>
						<div class="contBox ex">
							사랑을 했다 우리가 만나 지우지 못할 추억이 됐다 볼만한 멜로드라마 괜찮은 결말 그거면 됐다 널 사랑했다
						</div>
						<div class="btnTrans ex">가사번역</div>						
					</li>
					<li>
						<div class="contBox ex">
							저 오늘 떠나요 공항으로 핸드폰 꺼 놔요 제발 날 찾진 말아줘 시끄럽게 소리를 질러도 어쩔 수 없어 나 가볍게 손을 흔들며 bye bye-
						</div>
						<div class="btnTrans ex">가사번역</div>						
					</li>
					<li>
						<div class="contBox ex">
							어떻게 난 해야 해 니가 떠난다고 말하면 난 혼자 남겨지는 게 더 두려울 텐데 이율 말해준다면 조금 편할 것 같아 아주 작은 손짓조차도 내겐 소중한 너를 잊을 수 없는 슬픈 기억 속으로 보내 잠 못 이루겠지
						</div>
						<div class="btnTrans ex">가사번역</div>						
					</li>
				</ul>
			</div>
			
			<div class="h2Wrap"><i class="fas fa-book"></i><h2 class="ex">뉴스 번역</h2></div>
			
			<div class="newsArea">
				<div class="title ex">당정 “7~8월 가구당 평균 전기요금 19.5% 인하”</div>
				<div class="contBox ex">
					전기요금 부담 경감을 위해 현행 누진제를 일시적으로 완화해 7~8월 가구당 평균 전기요금을 19.5% 인하한다. 또 누진제 완화와는 별도로 ‘사회적 배려계층’에 대해서는 특별지원 대책을 시행한다. 
					
					산업통상자원부와 더불어민주당은 7일 오전 당정협의 직후 현행 3단계인 누진 구간 중 1단계와 2단계 구간을 확대하는 내용이 담긴 누진제 완화방안을 발표했다.
					
					당정협의 결과에 따라 1단계 상한은 200㎾h에서 300㎾h로, 2단계 상한은 400㎾h에서 500㎾h로 올라간다. 한국전력 이사회를 거쳐 정부에서 이 안이 최종 확정될 경우 기대되는 요금인하 효과는 총 2761억원으로 가구당 평균 인하효과는 19.5%에 달한다. 

				</div>
				<div class="btnTrans ex">뉴스 번역</div>						
				
			</div>
			
			
			<form id="papagoContent">
				<!-- <div class="chLang">
				<p class="tit">번역해서 보내고 싶은 언어를 선택하세요.</p>
				<ul>
				<li><input type="radio" id="chat01" value="ko" checked name="chat"><label for="chat01">한국어</label></li>
				<li><input type="radio" id="chat02" value="en"  name="chat"><label for="chat02">영어</label></li>
			</ul>
		</div> -->
		<textarea class="chatCont" name="chatText"></textarea>
	</form>
</div>


<button class="allChange btnTrans">전체번역</button>

<div class="loading">
	<i class="fas fa-sync fa-spin"></i>
</div>


<div class="testBox"></div>

<script>
/*
JSON 형태
{"message":{"@type":"response","@service":"naverservice.labs.api","@version":"1.0.0","result":{"translatedText":"Are you kidding me","srcLangType":"ko"}}}.
*/

//공백 체크
var blank_pattern = /^\s+|\s+$/g;

$(function(){
	
	//전체본문 번역
	$('.allChange').on('click',function(){
		
		var count = 0;
		var exLength = $('.ex').length;
		
		$('.loading').fadeIn('fast');
		$('.btnTrans').hide();
		
		$('.ex').each(function(){
			var el = $(this);
			var text = el.text();
			
			$('#papagoContent textarea').val(text)
			
			$.ajax({     
				type:    'POST',
				url:     'papago_content.php',
				data:    $("#papagoContent").serialize(),
				success: function(data) 
				{
					try{
						var contact = JSON.parse(data); //json 파싱
						el.text(contact.message.result.translatedText);
						
						++count;
						if(count == exLength){
							$('.loading').fadeOut('fast');
						}
						
						}catch(e){
							alert('하루사용량을 초과하였습니다');
					}
					

					
				},error : function() {
					alert('통신실패!!');
				}
			});
		})
	})
	
	//가사번역
	$('.contentArea .btnTrans').on('click',function(){
		
		$('.loading').show();
		
		var el = $(this);
		var elFriend = el.siblings('.contBox');
		var elFriendText = elFriend.text();
		
		
		$('#papagoContent textarea').val(elFriendText);
		
		$.ajax({     
			type:    'POST',
			url:     'papago_content.php',
			data:    $("#papagoContent").serialize(),
			success: function(data) 
			{
				try{
					var contact = JSON.parse(data); //json 파싱
					elFriend.text(contact.message.result.translatedText);
					
					//로딩바숨김
					$('.loading').fadeOut('fast');
					
					//번역버튼 숨김
					el.hide();
					
					//전체번역 제외
					elFriend.removeClass('ex');
					
					}catch(e){
						alert('하루사용량을 초과하였습니다');
				}

				
			},error : function() {
				alert('통신실패!!');
			}
			
		});
	})
	
	
	//뉴스번역
	$('.newsArea .btnTrans').on('click',function(){
		
		var count = 0;
		var exLength = $('.newsArea .ex').length;
		
		$('.loading').fadeIn('fast');
		$(this).hide();
		
		$('.newsArea .ex').each(function(){
			var el = $(this);
			var text = el.text();
			
			$('#papagoContent textarea').val(text)
			
			$.ajax({     
				type:    'POST',
				url:     'papago_content.php',
				data:    $("#papagoContent").serialize(),
				success: function(data) 
				{
					var contact = JSON.parse(data); //json 파싱

					el.text(contact.message.result.translatedText);
					
					++count;
					if(count == exLength){
						$('.loading').fadeOut('fast');
					}
					
				},error : function() {
					alert('통신실패!!');
				}
			});
		})
		
		
		
		
	})
	
	
});		


</script>



</body>
</html>



